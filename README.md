# **Energy Network Optimization Problem**

This repository contains an optimization model for managing energy networks. The model integrates fossil fuel generation, renewable energy sources, and battery storage to meet electricity demand while minimizing costs and adhering to operational constraints.

## **Table of Contents**
1. [Overview](#overview)
2. [Parameters](#parameters)
3. [Decision Variables](#decision-variables)
4. [Objective Function](#objective-function)
5. [Constraints](#constraints)
6. [Explanation of the Model](#explanation-of-the-model)
7. [Installation](#installation)
8. [Usage](#usage)
9. [Code Structure](#code-structure)
10. [Results](#results)
11. [Contributing](#contributing)
12. [License](#license)

---

## **Overview**
The goal of this project is to optimize the operation of an energy network by balancing supply and demand while considering:
- Fossil fuel generation (with costs, ramp rates, and emission limits).
- Renewable energy integration (e.g., solar or wind availability).
- Battery storage dynamics (charging, discharging, and capacity limits).
- Spinning reserve requirements for reliability.
- Emission caps to reduce environmental impact.

This model uses **Julia** with the **JuMP** package for optimization and the **HiGHS** solver for solving linear programming problems.

---

## **Parameters**
Parameters define the inputs to the model and represent the characteristics of the energy network.

-   $F$: Set of fossil fuel units, indexed by $f$. Each unit has specific properties such as capacity, cost, and emissions.
-   $T$: Set of time periods, indexed by $t$. The model operates over a discrete time horizon (e.g., 24 hours in a day).
-   $FossilCapacity_{(f)}$: Maximum generation capacity of fossil unit $f$ (MW). This represents the upper limit on how much power a unit can generate.
-   $FossilGenCost_{(f)}$: Cost per MW of generating power from fossil unit $f$ ($/MW). Lower-cost units are prioritized in the optimization.
-   $FossilStartCost_{(f)}$: Fixed start-up cost for fossil unit $f$ ($). This accounts for the cost of turning a unit ON after being OFF.
-   $MinUpTime_{(f)}$: Minimum number of hours fossil unit $f$ must remain ON after starting. This prevents frequent switching, which can be costly and inefficient.
-   $MinDownTime_{(f)}$: Minimum number of hours fossil unit $f$ must remain OFF after shutting down. This ensures stability in operations.
-   $RampLimit_{(f)}$: Maximum change in generation (MW/hour) for fossil unit $f$. This limits how quickly a unit can increase or decrease its output.
-   $EmissionFactor_{(f)}$: Emission rate of fossil unit $f$ (tons/MW). Higher-emission units contribute more to pollution.
-   $EmissionCap$: Total allowable emissions (tons). This enforces environmental regulations.
-   $RenewableAvail_{(t)}$: Available renewable energy at time $t$ (MW). This depends on weather conditions (e.g., sunlight or wind speed).
-   $Demand_{(t)}$: Electricity demand at time $t$ (MW). The model must satisfy this demand at all times.
-   $BatteryCapacity$: Maximum energy storage capacity of the battery (MWh). This determines how much energy the battery can store.
-   $ChargeDischargeLimit$: Maximum charging/discharging rate of the battery (MW). This limits how quickly the battery can charge or discharge.
-   $BatteryEfficiency$: Efficiency of the battery (dimensionless, between 0 and 1). Energy losses occur during charging and discharging.
-   $ReserveFraction$: Fraction of demand required as spinning reserve. This ensures backup capacity for unexpected changes in demand or supply.

---

## **Decision Variables**
Decision variables represent the choices made by the model during optimization.

-   $Gen_{(f,t)} \in [0, FossilCapacity_{(f)}]$: Power generated by fossil unit $f$ at time $t$ (MW). The model decides how much power each unit should produce.
-   $On_{(f,t)} \in \{0, 1\}$: Binary variable indicating if fossil unit $f$ is ON at time $t$. A value of 1 means the unit is operational.
-   $StartUp_{(f,t)} \in \{0, 1\}$: Binary variable indicating if fossil unit $f$ starts up at time $t$. This tracks when a unit transitions from OFF to ON.
-   $ShutDown_{(f,t)} \in \{0, 1\}$: Binary variable indicating if fossil unit $f$ shuts down at time $t$. This tracks when a unit transitions from ON to OFF.
-   $Ren_{(t)} \in [0, RenewableAvail_{(t)}]$: Renewable energy used at time $t$ (MW). The model decides how much renewable energy to utilize.
-   $Curtail_{(t)} \geq 0$: Renewable energy curtailed (not used) at time $t$ (MW). This occurs when renewable availability exceeds demand or storage capacity.
-   $Charge_{(t)} \in [0, ChargeDischargeLimit]$: Power charged into the battery at time $t$ (MW). The model decides when to store excess energy.
-   $Discharge_{(t)} \in [0, ChargeDischargeLimit]$: Power discharged from the battery at time $t$ (MW). The model decides when to use stored energy.
-   $Stored_{(t)} \in [0, BatteryCapacity]$: Energy stored in the battery at time $t$ (MWh). This tracks the state of the battery over time.

---

## **Objective Function**
The objective of the model is to minimize total operational costs:

$$
\text{Minimize } \sum_{f \in F, t \in T} FossilGenCost_{(f)} \cdot Gen_{(f,t)} + \sum_{f \in F, t \in T} FossilStartCost_{(f)} \cdot StartUp_{(f,t)} + BatteryCost \cdot \sum_{t \in T} (Charge_{(t)} + Discharge_{(t)})
$$

### **Components of the Objective Function**
1. **Fossil Generation Costs**: 
   - The cost of generating power from fossil units is proportional to the amount of power produced ($Gen_{(f,t)}$).
   - Units with lower $FossilGenCost_{(f)}$ are prioritized to reduce costs.

2. **Start-Up Costs**: 
   - Starting a fossil unit incurs a fixed cost ($FossilStartCost_{(f)}$). The model minimizes unnecessary start-ups to save money.

3. **Battery Operation Costs**: 
   - Charging and discharging the battery incurs a cost proportional to the power transferred ($Charge_{(t)}$ and $Discharge_{(t)}$).

---

## **Constraints**
Constraints ensure that the solution satisfies physical, operational, and regulatory requirements.

### **Demand Balance Constraints**
For each time period $t$:

$$
\sum_{f \in F} Gen_{(f,t)} + Ren_{(t)} + Discharge_{(t)} - Charge_{(t)} = Demand_{(t)}
$$

- The total power supplied (fossil generation + renewables + battery discharge) must equal the demand at each time step.
- Any excess renewable energy is either stored in the battery or curtailed.

### **Renewable Availability Constraints**
For each time period $t$:

$$
Ren_{(t)} + Curtail_{(t)} = RenewableAvail_{(t)}
$$

- Renewable energy used ($Ren_{(t)}$) plus curtailed energy ($Curtail_{(t)}$) cannot exceed the available renewable energy ($RenewableAvail_{(t)}$).

### **Battery Dynamics Constraints**
For each time period $t > 1$:

$$
Stored_{(t)} = Stored_{(t-1)} + BatteryEfficiency \cdot Charge_{(t-1)} - \frac{Discharge_{(t-1)}}{BatteryEfficiency}
$$
Initial condition:
$$
Stored_{(1)} = 0
$$

- The battery's stored energy evolves over time based on charging and discharging.
- Energy losses occur due to inefficiencies ($BatteryEfficiency < 1$).

### **Prevent Over-Discharge Constraints**
For each time period $t > 1$:

$$
Discharge_{(t)} \leq Stored_{(t-1)}
$$

- The battery cannot discharge more energy than it currently holds.

### **Start-Up and Shut-Down Tracking Constraints**
For each fossil unit $f$ and time period $t > 1$:

$$
StartUp_{(f,t)} \geq On_{(f,t)} - On_{(f,t-1)}
$$
$$
ShutDown_{(f,t)} \geq On_{(f,t-1)} - On_{(f,t)}
$$

- These constraints track when units are turned ON or OFF.

### **Minimum Up/Down Time Constraints**
For each fossil unit $f$:

$$
\sum_{\tau \in t:(t + MinUpTime_{(f)} - 1)} On_{(f,\tau)} \leq MinUpTime_{(f)} \cdot On_{(f,t)}
$$
$$
\sum_{\tau \in t:(t + MinDownTime_{(f)} - 1)} (1 - On_{(f,\tau)}) \leq MinDownTime_{(f)} \cdot (1 - On_{(f,t)})
$$

- Units must stay ON or OFF for a minimum number of hours to avoid frequent switching.

### **Ramp Rate Constraints**
For each fossil unit $f$ and time period $t > 1$:

$$
|Gen_{(f,t)} - Gen_{(f,t-1)}| \leq RampLimit_{(f)}
$$

- Fossil units cannot increase or decrease generation too quickly.

### **Spinning Reserve Constraints**
For each time period $t$:

$$
\sum_{f \in F} (On_{(f,t)} \cdot FossilCapacity_{(f)} - Gen_{(f,t)}) + (ChargeDischargeLimit - Discharge_{(t)}) \geq ReserveFraction \cdot Demand_{(t)}
$$

- Sufficient backup capacity must be available to handle unexpected changes.

### **Emission Cap Constraints**

$$
\sum_{f \in F, t \in T} EmissionFactor_{(f)} \cdot Gen_{(f,t)} \leq EmissionCap
$$

- Total emissions from fossil generation must not exceed the specified limit.

### **Link Generation to Unit Commitment Constraints**
For each fossil unit $f$ and time period $t$:

$$
Gen_{(f,t)} \leq On_{(f,t)} \cdot FossilCapacity_{(f)}
$$

- Fossil units can only generate power if they are ON.

---

## **Explanation of the Model**
### **Why This Model Matters**
The energy network optimization model addresses key challenges in modern power systems:
1. **Cost Efficiency**: By minimizing operational costs, the model helps utilities reduce expenses and improve profitability.
2. **Environmental Impact**: The emission cap ensures compliance with environmental regulations and supports sustainability goals.
3. **Reliability**: Spinning reserve and ramp rate constraints ensure the system can handle unexpected changes in demand or supply.
4. **Renewable Integration**: The model maximizes the use of renewable energy while managing curtailment and storage.

### **How It Works**
1. **Inputs**: The model takes inputs such as demand, renewable availability, and unit characteristics.
2. **Optimization**: Using linear programming, the model determines the optimal schedule for fossil units, renewable usage, and battery operations.
3. **Outputs**: The results include hourly schedules for generation, renewable usage, battery operations, and total costs.

---

## **Installation**
### **Prerequisites**
- **Julia**: Install Julia from [https://julialang.org/downloads/](https://julialang.org/downloads/).
- **Git**: Install Git from [https://git-scm.com/](https://git-scm.com/).

### **Steps**
1. **Clone the Repository**:
   ```bash
   git clone https://github.com/your-username/EnergyNetworkOptimization.git
   cd EnergyNetworkOptimization
   ```

2. **Install Dependencies**:
   - Open Julia in the terminal:
     ```bash
     julia
     ```
   - Activate the project environment and install dependencies:
     ```julia
     ] activate .
     ] instantiate
     ```

3. **Verify Installation**:
   - Exit Julia (`Ctrl + D`) and verify the installation by running:
     ```bash
     julia --project=. -e 'using JuMP; using HiGHS; println("Dependencies installed successfully!")'
     ```

---

## **Usage**
### **Running the Model**
1. **Run the Main Script**:
   Execute the optimization model:
   ```bash
   julia --project=. main.jl
   ```
   The script will solve the optimization problem and print the results to the terminal.

2. **View Results**:
   - The output includes:
     - Hourly generation schedules for fossil units.
     - Renewable generation and curtailment.
     - Battery operations (charging, discharging, stored energy).
   - Example output:
     ```
     Hour 1:
       FossilUnit1: On =1.0, Gen =56.0 MW
       FossilUnit2: On =0.0, Gen =0.0 MW
       Renewables  =54.0 MW, Curtailment =0.0 MW
       Battery     = Stored:0.0, Charge:0.0, Discharge:0.0
     ```

---

## **Code Structure**
The repository is organized as follows:

```
EnergyNetworkOptimization/
├── main.jl               # Main script to define and solve the optimization model
├── test/
│   └── runtests.jl       # Test cases to validate the model
├── .github/
│   └── workflows/
│       └── ci.yml        # GitHub Actions workflow for CI
├── Project.toml          # Dependencies file
└── Manifest.toml         # Exact versions of all dependencies
```

### **Key Files**
1. **`main.jl`**:
   - Defines the optimization model, solves it, and outputs the results.
2. **`test/runtests.jl`**:
   - Contains tests to validate the model's correctness.
3. **`Project.toml` and `Manifest.toml`**:
   - Manage Julia dependencies for reproducibility.
4. **`.github/workflows/ci.yml`**:
   - Defines a GitHub Actions workflow for Continuous Integration (CI).


---

## **Results**
### **Expected Outputs**
- **Hourly Schedules**:
  - On/off status and generation levels for each fossil unit.
  - Renewable generation and curtailment.
  - Battery operations (charging, discharging, stored energy).

- **Objective Value**:
  - Total cost of operation, including generation, start-up, and battery costs.

- **Constraints**:
  - Demand balance, emission caps, and operational constraints are satisfied.

---

## **Contributing**
We welcome contributions to improve this model! To contribute:
1. Fork the repository.
2. Create a new branch for your feature or bug fix:
   ```bash
   git checkout -b feature-name
   ```
3. Commit your changes:
   ```bash
   git commit -m "Add feature or fix"
   ```
4. Push your branch and open a pull request.

---

## **License**
This project is licensed under the **MIT License**. See the [LICENSE](LICENSE) file for details.

---

## **Contact**
For questions or feedback, feel free to reach out:
- GitHub Issues: Open an issue in this repository.
- Email: mansour.zarrin['@']gmail.com


